
<div class="container-center">
    <div class="container-center-column">
        <!--TITLE-->
        <div class="row width-80">
            <div class="title">
                {{title}}
            </div>
        </div>
        <div class="row width-80">
            Please enter the required information:
        </div>
        <!--LINE 1-->
        <div class="row width-80">
         <form [formGroup] = "mainPropertyCharacteristic">
        <div *ngIf="c.status === 'INVALID' && submitProperty" class="err-msg">
            Please fix all the fields with errors
        </div>
        <div class="row width-80">
            <div class="title">
                Property Address
            </div>
        </div>
        <div class="property-address row width-100">
            <div class="row width-100">
                <div class="width-30 form">
                    <div for="country">Country</div>
                    <mat-form-field class="full-width" matLine appearance="outline">
                        <mat-select formControlName="country" >
                            <mat-option *ngFor="let country of countries" [value]="country">
                                {{country}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div *ngIf="c.controls.country.errors && submitProperty" class="err-msg">
                        Country is required
                    </div>
                </div>
                <div class="width-30 form">
                    <div for="city">City</div>
                    <mat-form-field class="full-width" appearance="outline">
                        <input type="text" matInput placeholder="City" formControlName="city">
                    </mat-form-field>
                    <div *ngIf="c.controls.city.errors && submitProperty" class="err-msg">
                        City is required
                    </div>
                </div>
                <div class="width-30 form">
                    <div for="street">Street and Nª</div>
                    <mat-form-field class="full-width" appearance="outline">
                        <input matInput formControlName="street" placeholder="Street" required autocorrect="off" autocapitalize="off" spellcheck="off" type="text" #search>
                    </mat-form-field>
                    <div *ngIf="c.controls.street.errors && submitProperty" class="err-msg">
                        Street is required
                    </div>
                </div>
            </div>
            <!--MAP-->
            <div>
                <div class="row width-80">
                    <div>
                        Or set the location with the marker:
                    </div>
                </div>
                <app-map (coordinates)="setCoordinates($event)" [setMapCoordinates]="setMapCoordinates" [mapPointInput]="mapPoint"></app-map>
            </div>
        </div>
        <div class="row width-80">
            <div class="title">
                Property Chracteristics
            </div>
        </div>
        <div class="row width-100">
            <div class="width-30 form">
                <label for="price">Price</label>
                <mat-form-field class="full-width" appearance="outline">
                    <input formControlName="price" placeholder="Price" type="number" matInput required>
                </mat-form-field>
                <div *ngIf="c.controls.price.errors && submitProperty" class="err-msg">
                    Price is required and needs to be a number
                </div>
            </div>
            <div class="width-30 form">
                <label for="netAream2">Area m2*</label>
                <mat-form-field class="full-width" appearance="outline">
                    <input type="number" matInput placeholder="Area m*" formControlName="netAream2" required>
                </mat-form-field>
                <div *ngIf="c.controls.netAream2.errors && submitProperty" class="err-msg">
                    Area m2 is required and needs to be a number
                </div>
            </div>
            <div class="width-30 form">
                <label  for="priceNetAream2">Price/m2</label>
                <mat-form-field class="full-width" appearance="outline">
                    <input type="number" matInput placeholder="Price/m2" formControlName = "priceNetAream2" disabled>
                </mat-form-field>
            </div>
        </div>
        <div class="row width-100">
            <div class="width-30 form">
                <label for="grossAream2">Gross Area m2</label>
                <mat-form-field class="full-width" appearance="outline">
                    <input type="number" matInput placeholder="Gross Area m2" formControlName="grossAream2">
                </mat-form-field>
                <div *ngIf="c.controls.grossAream2.errors && submitProperty" class="err-msg">
                    Gross Area m2 is required and needs to be a number
                </div>
            </div>
            <div class="width-30 form">
                <label for="propertyTypeId">Typology*</label>
                <mat-form-field class="width-100" appearance="outline">
                    <mat-select formControlName="propertyTypeId" required>
                        <mat-option *ngFor="let type of propertyTypes" [value]="type.Id">
                            {{type.Type}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <div *ngIf="c.controls.propertyTypeId.errors && submitProperty" class="err-msg">
                    Property type is required
                </div>
            </div>
            <div class="width-30 form">
                <label for="floor">Floor</label>
                <mat-form-field class="width-100" appearance="outline">
                    <mat-select formControlName="floor">
                        <mat-option *ngFor="let floor of floors" [value]="floor">
                            {{floor}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="width-30 form">
                <label for="rooms">Room</label>
                <mat-form-field class="width-100" appearance="outline">
                    <mat-select formControlName="rooms">
                        <mat-option *ngFor="let room of rooms" [value]="rooms">
                            {{room}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="row width-100">
            <div class="width-30 form">
                <label for="yearOfConstruction">Year of construction</label>
                <mat-form-field class="full-width form" appearance="outline">
                    <input type="number" placeholder="Year of construction" matInput formControlName="yearOfConstruction">
                </mat-form-field>
                <div *ngIf="c.controls.yearOfConstruction.errors && submitProperty" class="err-msg">
                    Year of construction is required and needs to be equal or the same as the current year
                </div>
            </div>
            <div class="width-30 form">
                <label for="numberOfBathrooms">Nº Bathrooms</label>
                <mat-form-field class="width-100 form" appearance="outline">
                    <mat-select formControlName="numberOfBathrooms" required>
                        <mat-option *ngFor="let bathroom of bathrooms" [value]="bathroom">
                            {{bathroom}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <div *ngIf="c.controls.numberOfBathrooms.errors && submitProperty" class="err-msg">
                    Nº Bathrooms is required
                </div>
            </div>
            <div class="width-30 form">
                <label for="enerergyCertificate">Energy Certificate</label>
                <mat-form-field class="width-100 form" appearance="outline">
                    <mat-select formControlName="enerergyCertificate">
                        <mat-option *ngFor="let certificate of energyCertificate" [value]="certificate">
                            {{certificate}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="row width-100">
            <div class="width-30 form">
                <label for="conditionState">Condition State</label>
                <mat-form-field class="width-100 form" appearance="outline">
                    <mat-select formControlName="conditionState" required>
                        <mat-option *ngFor="let condition of conditionStateOption" [value]="condition">
                            {{condition}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <div *ngIf="c.controls.conditionState.errors && submitProperty" class="err-msg">
                    Condition State is required
                </div>
            </div>
            <div class="width-30 form">
                <label for="sunOrientation">Sun Orientation</label>
                <mat-form-field class="width-100 form" appearance="outline">
                    <mat-select formControlName="sunOrientation">
                        <mat-option *ngFor="let sunOrt of sunOrientationOption" [value]="sunOrt">
                            {{sunOrt}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <div class="row width-80">
            <div class="title" for ="description">
                Add Descritpion
            </div>
        </div>
        <div class="row width-80">
            <textarea matInput class="textarea" formControlName="description" required></textarea>
        </div>
        <div *ngIf="c.controls.description.errors && submitProperty" class="err-msg">
            Descritpion is required
        </div>
        <div class="row width-80">
            <div class="title">
                Charecteristics
            </div>
        </div>
        <div class="row row width-80">        
            <div class="tab" *ngIf="characteristics.length > 0"> 
                <div class="row characteristics">
                    <div  *ngFor="let item of characteristics; let i = index">
                        <div class="col-12 badge badge-pill badge-light" [ngClass]="{characteristicSelected: item.addedToProperty}" (click)= "addToProperty(item)">
                            <img src="/assets/icons/{{item.IconName}}.svg" width="22" />
                            {{item.Name}}
                        </div> 
                    </div>
                </div>
            </div>
        </div>
        <div class="row width-80">
            <div class="title">
                Add Photos (max 12)
            </div>
        </div>
        <div class="row width-80">
            Please add photos:
        </div>
        <div class="row width-80">
            <div class="photo">
                <input type="file" hidden #uploader accept="image/*" (change)="uploadImage($event)">
                <span class="material-icons" (click)="uploader.click()">
                    add_photo_alternate
                </span>
            </div>
            <div class="photo-inserted" *ngFor="let thumbnail of thumbnails">
                <div class="fill">
                    <img [src]="thumbnail">
                </div>
            </div>
        </div>
        <div *ngIf="photos.length === 0 && submitProperty" class="err-msg">
            The property needs to have photos
        </div>
        <div class="row width-80">
            <div class="title">
                Contact
            </div>
        </div>
        <div class="row width-100">
            <div class="width-30 form">
                <label for="name">Name</label>
                <mat-form-field class="full-width" appearance="outline">
                    <input type="text" matInput placeholder="Name" formControlName="name">
                </mat-form-field>
                <div *ngIf="c.controls.name.errors && submitProperty" class="err-msg">
                    Name is required
                </div>
            </div>
            <div class="width-30 form">
                <label for="email">Email</label>
                <mat-form-field class="full-width" appearance="outline">
                    <input type="text" matInput placeholder="Email" formControlName="email">
                </mat-form-field>
                <div *ngIf="c.controls.email.errors && submitProperty" class="err-msg">
                    Email is required and needs to be valid
                </div>
            </div>
            <div class="width-30 form">
                <label for="telephone">Telephone</label>
                <mat-form-field class="full-width" appearance="outline">
                    <input type="number" matInput placeholder="Telephone" formControlName="telephone">
                </mat-form-field>
                <div *ngIf="c.controls.telephone.errors && submitProperty" class="err-msg">
                    Telephone is required and needs to be a number
                </div>
            </div>
        </div>
        <div class="row">
            <button class="list" mat-raised-button (click)="publishListingSubmit()">Publish listing</button>
        </div>
        </form>
        </div>
    </div>
</div>
